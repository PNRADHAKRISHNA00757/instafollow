import requests

def follow_user(username, access_token):
    url = f"https://api.instagram.com/v1/users/search?q={username}&access_token={access_token}"
    response = requests.get(url)
    data = response.json()

    if data['meta']['code'] == 200:
        user_id = data['data'][0]['id']
        url = f"https://api.instagram.com/v1/users/{user_id}/relationship?access_token={access_token}"
        payload = {"action": "follow"}
        response = requests.post(url, data=payload)

        if response.status_code ==from instagram_private_api import Client

def follow_user(username):
    # Replace 'your_username' and 'your_password' with your Instagram credentials
    api = Client('your_username', 'your_password')

    # Get the user id by their username
    user_info = api.username_info(username)
    user_id = user_info['user']['pk']

    # Follow the user
    result = api.friendships_create(user_id)

    if result['status'] == 'ok':
        print(f"Successfully followed {username}")
    else:
        print(f"Failed to follow {username}")

# Replace 'target_username' with the username of the user you want to follow
follow_user('target_username')pip install instagram_private_api
